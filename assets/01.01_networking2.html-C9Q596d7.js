import{_ as i,c as s,b as e,a as l,d as a,e as r,r as p,o as n}from"./app-CUDFWA7u.js";const o="/blog/assets/image-20241222165713275-DJAV0ERO.png",c="/blog/assets/image-20241222165939185-CJXF6Fbt.png",h="/blog/assets/image-20241222170012144-DOLfin7e.png",g="/blog/assets/image-20241222170255138-BGs35dRA.png",m="/blog/assets/image-20241222211705356-CVK10uiL.png",b="/blog/assets/image-20241223202327702-DRv8DUsX.png",u="/blog/assets/image-20241223203807855-CQIady2X.png",P="/blog/assets/image-20241223214650492-cWsIr67V.png",x="/blog/assets/image-20241223215005669-R7qAa_mp.png",_="/blog/assets/image-20241224214313236-JseGuSMO.png",k="/blog/assets/image-20241224215314153-d4uSNVL6.png",C="/blog/assets/image-20241224220358585-CvGfw3Y8.png",f="/blog/assets/image-20241224220555576-Cmg3RKyV.png",I="/blog/assets/image-20241224220926400-D-VMGaGI.png",T="/blog/assets/image-20241224221520262-B7aO7R2J.png",v="/blog/assets/image-20241225211813031-Chlj2Fge.png",R="/blog/assets/watermark_pic_center-Csn3i8QF.jpeg",M="/blog/assets/image-20241228134239451-D_9E92_U.png",S="/blog/assets/image-20241228134524431-C3XxPueO.png",D={},F={href:"https://info.support.huawei.com/info-finder/tool/zh/enterprise/packetformat",target:"_blank",rel:"noopener noreferrer"};function A(q,t){const d=p("ExternalLinkIcon");return n(),s("div",null,[t[2]||(t[2]=e('<h1 id="网络基础" tabindex="-1"><a class="header-anchor" href="#网络基础"><span>网络基础</span></a></h1><h2 id="一、两个参考模型" tabindex="-1"><a class="header-anchor" href="#一、两个参考模型"><span>一、两个参考模型</span></a></h2><h3 id="osi-模型" tabindex="-1"><a class="header-anchor" href="#osi-模型"><span>OSI 模型</span></a></h3><ul><li><p>应用层</p><ul><li>作用：满足下面模型无法解决的问题、产生不同的数据、验证手段-加密手段</li></ul></li><li><p>表示层</p><ul><li>作用：负责数据的解码、编译</li></ul></li><li><p>会话层</p><ul><li>作用：实现应用级别不同服务的区分（Session）</li></ul></li><li><p>传输层 (TCP-可以纠错 UDP-无法纠错)</p><ul><li>作用：实现一个设备上不同应用的区分、按不同的协议实现纠错</li><li>无法实现：无法实现应用级别不同服务的区分、有可能无法实现纠错</li></ul></li><li><p>网络层</p><ul><li>作用：从全局定位某一台设备(IP地址)、路由</li><li>无法实现：纠错、无法实现一个设备不同应用的区分</li></ul></li><li><p>数据链路层</p><ul><li>作用：差错检测 、提供链路上的地址信息 (mac地址)</li><li>无法实现：纠错、无法从全局的角度分析地址信息</li></ul></li><li><p>物理层</p><ul><li>作用：规范传输介质的标准-网线光纤(-设备的连接-数据的传输)</li><li>无法实现：差错检测</li></ul></li></ul><h3 id="tcp-ip-模型" tabindex="-1"><a class="header-anchor" href="#tcp-ip-模型"><span>TCP/IP 模型</span></a></h3>',5)),l("p",null,[t[1]||(t[1]=a("TCP/IP 模型与对应协议参考：")),l("a",F,[t[0]||(t[0]=a("Info-Finder（在线工具） 报文格式")),r(d)])]),t[3]||(t[3]=e('<ul><li>应用层：应用层 + 表示层 + 会话层</li><li>传输层：TCP / UDP</li><li>网络层：IP</li><li>网络接口层：数据链路层 + 物理层</li></ul><h2 id="二-三、数据封装-数据链路层" tabindex="-1"><a class="header-anchor" href="#二-三、数据封装-数据链路层"><span>二 &amp; 三、数据封装 &amp; 数据链路层</span></a></h2><h3 id="交换方式" tabindex="-1"><a class="header-anchor" href="#交换方式"><span>交换方式</span></a></h3><ul><li>电路交换（电话）</li><li>报文交换（在数据之外，加上能标识双方的信息）</li><li>分组交换（互联网，依然进行报文交换，但规定每个数据的大小）</li></ul><h3 id="不太重要的-csma-cd" tabindex="-1"><a class="header-anchor" href="#不太重要的-csma-cd"><span>不太重要的 CSMA/CD</span></a></h3><blockquote><p>只在同轴电缆时使用，现在已经不用了</p></blockquote><p><img src="'+o+'" alt="image-20241222165713275"></p><h3 id="数据链路层-以太网帧结构" tabindex="-1"><a class="header-anchor" href="#数据链路层-以太网帧结构"><span>数据链路层 - 以太网帧结构</span></a></h3><p>网络通信协议</p><p><img src="'+c+'" alt="image-20241222165939185"></p><p>数据封装</p><p><img src="'+h+'" alt="image-20241222170012144"></p><p>帧格式</p><p><img src="'+g+'" alt="image-20241222170255138"></p><blockquote><p>Type 字段的常见值：</p><p>ARP - 0x0806</p><p>IPv4 - 0x0800</p><p>Ipv6 - 0x86dd</p></blockquote><p>MTU：最大传输单元（指网络层及以上的封装）：存在于每条链路上的概念。如果报文的MTU过大，而链路所能承载的MTU值过小，则可能导致数据分片或者数据丢弃。</p><p>E2 封装完成后数据帧：最小为 64 最大为 1518 B</p><h2 id="四、mac地址-网络层" tabindex="-1"><a class="header-anchor" href="#四、mac地址-网络层"><span>四、Mac地址 &amp; 网络层</span></a></h2><p>mac 地址</p><ol><li><p>单播：通信形式上，点对点，单对单的通信，类似于私聊数据封装时，源mac和目的mac都是单播mac,则为单播通信。</p><ul><li>单播mac地址：从高位向低位（从左往右）第8位为0，且一定为0，其他任意。</li></ul></li><li><p>组播：通信形式上，点对多点，单对多的通信，类似于群聊</p><ul><li>组播mac地址：从高位向低位（从左往右）第8位为1，且一定为1，其他任意。</li><li>数据封装时，因为组播代表的是一组的集合，面向一组的通信，此时组播mac不能成为数据的源地址，仅能充当目的地址。</li></ul></li><li><p>广播：通信形式上，点对所有，单对所有的通信。广而播之/强制的接受处理。</p><ul><li>数据封装时，因为广播代表的是所有人集合，面向所有人的通信，此时广播mac不能成为数据的源地址，仅能充当目的地址。</li><li>广播mac地址：从高位向低位 48 位全部为1，且一定为1。</li></ul></li></ol><ul><li>发送者的动作： <ul><li>有发送者填充源目mac信息，以及type字段标识上层协议，以及CRC检验，数值填充至FCS,信息都填充完毕之后，此时借助物理层，转变为二进制比特流，从链路中传递。</li></ul></li></ul><p><img src="'+m+'" alt="image-20241222211705356"></p><p>a场景：</p><ul><li><p>数据抵达接收端接口以后，接收者的动作：</p><ul><li><p>首先看目的MAC,是否是自己的mac,如果不是丢弃，如果是，则进行下一步；（组播看是否加组，广播直接下一步）</p></li><li><p>将数据也进行CRC检验，比对FCS字段，如果不同则丢弃，如果相同，则进行下一步；</p></li><li><p>查看type字段，交由type字段标识的上层协议处理。数据链路层工作，结束。</p></li></ul></li></ul><h2 id="五、ip-地址" tabindex="-1"><a class="header-anchor" href="#五、ip-地址"><span>五、IP 地址</span></a></h2><p>以下是A类到E类IP地址以及几个特殊地址的列表：</p><h3 id="ip地址分类" tabindex="-1"><a class="header-anchor" href="#ip地址分类"><span>IP地址分类</span></a></h3><table><thead><tr><th>类别</th><th>范围</th><th>二进制开头</th><th>网络位长度</th><th>主机位长度</th><th>默认子网掩码</th><th>主要用途</th></tr></thead><tbody><tr><td><strong>A类地址</strong></td><td>(0.0.0.0~127.255.255.255) <br>1.0.0.0 到 126.0.0.0</td><td>0xxxxxxx</td><td>8位</td><td>24位</td><td>255.0.0.0</td><td>大型网络（约1600万台主机）</td></tr><tr><td><strong>B类地址</strong></td><td>128.0.0.0 到 191.255.0.0</td><td>10xxxxxx</td><td>16位</td><td>16位</td><td>255.255.0.0</td><td>中型网络（约6.5万台主机）</td></tr><tr><td><strong>C类地址</strong></td><td>192.0.0.0 到 223.255.255.0</td><td>110xxxxx</td><td>24位</td><td>8位</td><td>255.255.255.0</td><td>小型网络（约254台主机）</td></tr><tr><td><strong>D类地址</strong></td><td>224.0.0.0 到 239.255.255.255</td><td>1110xxxx</td><td>-</td><td>-</td><td>-</td><td>多播（Multicasting）</td></tr><tr><td><strong>E类地址</strong></td><td>240.0.0.0 到 255.255.255.255</td><td>1111xxxx</td><td>-</td><td>-</td><td>-</td><td>保留地址，预留未来或实验用途</td></tr></tbody></table><h3 id="特殊地址" tabindex="-1"><a class="header-anchor" href="#特殊地址"><span>特殊地址</span></a></h3><table><thead><tr><th>地址类型</th><th>范围</th><th>主要用途</th></tr></thead><tbody><tr><td>未指定的地址</td><td>0.0.0.0~0.255.255.255</td><td>未指定的地址，或在路由层面表示全网的所有地址</td></tr><tr><td>环回地址</td><td>127.0.0.1 到 127.255.255.255</td><td>主机内部通信测试（通常使用127.0.0.1）</td></tr><tr><td>广播地址</td><td>每个子网有自己的广播地址</td><td>发送到子网内所有主机的消息</td></tr><tr><td>私有地址</td><td>A类: 10.0.0.0 到 10.255.255.255<br>B类: 172.16.0.0 到 172.31.255.255<br>C类: 192.168.0.0 到 192.168.255.255</td><td>用于局域网内部，不在公共互联网中路由</td></tr><tr><td>自动私有IP地址</td><td>169.254.0.0 到 169.254.255.255</td><td>当主机无法从DHCP服务器获取IP地址时，自动分配</td></tr></tbody></table><h3 id="计算子网数量与主机数量" tabindex="-1"><a class="header-anchor" href="#计算子网数量与主机数量"><span>计算子网数量与主机数量</span></a></h3><p>子网数量 = 2 ^ (可变网络位数)</p><p>主机数量 = 2 ^ (可变主机位数) - 2</p><blockquote><p>1100 0000 . 1010 1000 . 0000 0001 . 0110 1111 地址 1111 1111 . 1111 1111 . 1111 1111 . 0000 0000 掩码 1100 0000 . 1010 1000 . 0000 0001 . 0000 0000 网络地址（出现在路由表）192.168.1.0 1100 0000 . 1010 1000 . 0000 0001 . 1111 1111 广播地址（用于本网段所有主机通信）192.168.1.255</p></blockquote><h3 id="vlsm-内部使用" tabindex="-1"><a class="header-anchor" href="#vlsm-内部使用"><span>VLSM 内部使用</span></a></h3><p><img src="'+b+'" alt="image-20241223202327702"></p><h3 id="cidr-向外通告" tabindex="-1"><a class="header-anchor" href="#cidr-向外通告"><span>CIDR 向外通告</span></a></h3><p><img src="'+u+'" alt="image-20241223203807855"></p><h3 id="icmp-ping-测试" tabindex="-1"><a class="header-anchor" href="#icmp-ping-测试"><span>ICMP ping 测试</span></a></h3><ol><li>通信时，发送端的主机会使用对方的P地址+自己的掩码进行计算，算出对方的网络地址</li><li>计算之后，将对方的网络地址和自己的网络地址进行对比，相同，则认为在同一网段；不同，则认为不在一个网段。</li></ol><p><img src="'+P+'" alt="image-20241223214650492"></p><p><img src="'+x+'" alt="image-20241223215005669"></p><p>以下是ICMP（Internet Control Message Protocol）的消息类型及其编码类型的详细列表：</p><blockquote><p>ICMP 算 3.5 层协议</p></blockquote><table><thead><tr><th>消息类型编号</th><th>消息类型</th><th>编码类型</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>回送应答（Echo Reply）</td><td>0</td><td>主机接收到回送请求时的响应消息，用于Ping命令的应答。</td></tr><tr><td>3</td><td>目标不可达（Destination Unreachable）</td><td>0 - 网络不可达<br>1 - 主机不可达<br>2 - 协议不可达<br>3 - 端口不可达<br>4 - 需要分段但设置了DF标志<br>5 - 源路由失败<br>6 - 目的网络未知<br>7 - 目的主机未知<br>8 - 源主机被隔离<br>9 - 通信网络被禁止<br>10 - 通信主机被禁止<br>11 - 对网络的优先级控制范围外<br>12 - 对主机的优先级控制范围外<br>13 - 通信管理被禁止<br>14 - 主机超出允许访问限制<br>15 - 失踪的校验和错误</td><td>指示目标网络或主机不可达的错误消息。</td></tr><tr><td>4</td><td>源抑制（Source Quench）</td><td>0</td><td>通知发送方减少发送速率，已被弃用。</td></tr><tr><td>5</td><td>重定向消息（Redirect Message）</td><td>0 - 网络重定向<br>1 - 主机重定向<br>2 - TOS和网络重定向<br>3 - TOS和主机重定向</td><td>指示主机重定向数据包的更好路径。</td></tr><tr><td>8</td><td>回送请求（Echo Request）</td><td>0</td><td>请求目标主机发送回送应答消息，用于Ping命令。</td></tr><tr><td>9</td><td>路由器通告（Router Advertisement）</td><td>0</td><td>路由器定期通告其存在，便于主机发现路由器。</td></tr><tr><td>10</td><td>路由器请求（Router Solicitation）</td><td>0</td><td>主机请求路由器发送路由器通告消息。</td></tr><tr><td>11</td><td>超时（Time Exceeded）</td><td>0 - 传输期间TTL超时<br>1 - 组装期间分段超时</td><td>数据包在传输或组装过程中超时。</td></tr><tr><td>12</td><td>参数问题（Parameter Problem）</td><td>0 - 错误指针<br>1 - 缺少必需选项<br>2 - 错误长度</td><td>数据包头部参数错误。</td></tr><tr><td>13</td><td>时间戳请求（Timestamp Request）</td><td>0</td><td>请求时间戳信息。</td></tr><tr><td>14</td><td>时间戳应答（Timestamp Reply）</td><td>0</td><td>时间戳请求的响应消息。</td></tr><tr><td>15</td><td>信息请求（Information Request）</td><td>0</td><td>主机请求网络地址，已被弃用。</td></tr><tr><td>16</td><td>信息应答（Information Reply）</td><td>0</td><td>信息请求的响应消息，已被弃用。</td></tr><tr><td>17</td><td>地址掩码请求（Address Mask Request）</td><td>0</td><td>请求子网掩码信息。</td></tr><tr><td>18</td><td>地址掩码应答（Address Mask Reply）</td><td>0</td><td>地址掩码请求的响应消息。</td></tr></tbody></table><h3 id="icmp-重定向" tabindex="-1"><a class="header-anchor" href="#icmp-重定向"><span>ICMP 重定向</span></a></h3><p>主机 A 想要跨网段通信访问 20.0.0.1/24</p><p>RTB 会发送 ICMP 重定向报文给 主机 A，让他修改路由表，</p><p>下次要到 20.0.0.1/24 的时候，直接去找 10.0.0.200/24 会更快，不用来找网关。</p><p><img src="'+_+'" alt="image-20241224214313236"></p><h3 id="arp" tabindex="-1"><a class="header-anchor" href="#arp"><span>ARP</span></a></h3><blockquote><p>ARP 算 2.5 层协议</p></blockquote><p><img src="'+k+'" alt="image-20241224215314153"></p><p><img src="'+C+'" alt="image-20241224220358585"></p><blockquote><p>ENSP 中 target-mac 会显示 FFFF-FFFF-FFFF 这是错误的，用 EVE 或其他平台的就会有正确的 0000-0000-0000</p></blockquote><p><img src="'+f+'" alt="image-20241224220555576"></p><p><img src="'+I+'" alt="image-20241224220926400"></p><h4 id="免费-arp" tabindex="-1"><a class="header-anchor" href="#免费-arp"><span>免费 ARP</span></a></h4><blockquote><p>接口获得 IP 后，自动向外发送 ARP 报文，自己发给自己</p><p>如果没有外界回应，代表 IP 可用，如果有外界回应，说明存在 IP 地址冲突。</p></blockquote><p><img src="'+T+'" alt="image-20241224221520262"></p><h3 id="传输层协议" tabindex="-1"><a class="header-anchor" href="#传输层协议"><span>传输层协议</span></a></h3><p>端口 = port【逻辑端口】</p><p>基于应用级别的互访，就是端口到端口的互访。</p><p>传输层 = 0 ~ 65535【端口范围】===TCP/UDP</p><p>0~1023端口：知名端口提前保留出来的端口</p><p>TCP协议：FTP服务[20/21] SSH[22] Telnet服务[23] HTTP服务[80] HTTPS[443]</p><p>UDP协议：DNS服务[53] DHCP协议[67/68]</p><p>TCP协议：传输控制协议——面向连接的协议</p><ul><li>只能适应于单播通信</li><li>可以给予建立好的连接灵活的对接下来的数据传递进行控制</li><li>无法很好地满足即时性的业务要求，传递一些文件稳定性支持性很好</li><li>自带分片功能（<u>一般会在这里就分片好，然后在网络层直接传输，无需在网络层分片</u>）</li></ul><p>UDP协议：用户数据包协议——面向无连接的协议</p><ul><li>保证数据进行传输但是UDP无法对于传递的数据进行控制，如果想对数据做控制，此时借用应用层实现。</li><li>可以很好地满足即时性的要求，对时间要求比较高</li><li>对于上层传递的数据，“全盘接收”【没有分片机制】用于相对比较小的流量</li></ul><h4 id="tcp-三次握手" tabindex="-1"><a class="header-anchor" href="#tcp-三次握手"><span>TCP 三次握手</span></a></h4><p>大 SYN 在握手前两次置为 1，后面置为 0</p><p><img src="'+v+'" alt="image-20241225211813031"></p><p><img src="'+R+'" alt="在这里插入图片描述"></p><h4 id="mtu" tabindex="-1"><a class="header-anchor" href="#mtu"><span>MTU</span></a></h4><p><img src="'+M+'" alt="image-20241228134239451"></p><h4 id="tcp-流量控制" tabindex="-1"><a class="header-anchor" href="#tcp-流量控制"><span>TCP 流量控制</span></a></h4><p><img src="'+S+'" alt="image-20241228134524431"></p>',79))])}const E=i(D,[["render",A]]),U=JSON.parse('{"path":"/blogs/tech/networking/others/01.01_networking2.html","title":"网络基础","lang":"en-US","frontmatter":{"title":"网络基础","date":"2024-12-22T00:00:00.000Z","tags":["Networking"],"categories":["tech"]},"headers":[{"level":2,"title":"一、两个参考模型","slug":"一、两个参考模型","link":"#一、两个参考模型","children":[{"level":3,"title":"OSI 模型","slug":"osi-模型","link":"#osi-模型","children":[]},{"level":3,"title":"TCP/IP 模型","slug":"tcp-ip-模型","link":"#tcp-ip-模型","children":[]}]},{"level":2,"title":"二 & 三、数据封装 & 数据链路层","slug":"二-三、数据封装-数据链路层","link":"#二-三、数据封装-数据链路层","children":[{"level":3,"title":"交换方式","slug":"交换方式","link":"#交换方式","children":[]},{"level":3,"title":"不太重要的 CSMA/CD","slug":"不太重要的-csma-cd","link":"#不太重要的-csma-cd","children":[]},{"level":3,"title":"数据链路层 - 以太网帧结构","slug":"数据链路层-以太网帧结构","link":"#数据链路层-以太网帧结构","children":[]}]},{"level":2,"title":"四、Mac地址 & 网络层","slug":"四、mac地址-网络层","link":"#四、mac地址-网络层","children":[]},{"level":2,"title":"五、IP 地址","slug":"五、ip-地址","link":"#五、ip-地址","children":[{"level":3,"title":"IP地址分类","slug":"ip地址分类","link":"#ip地址分类","children":[]},{"level":3,"title":"特殊地址","slug":"特殊地址","link":"#特殊地址","children":[]},{"level":3,"title":"计算子网数量与主机数量","slug":"计算子网数量与主机数量","link":"#计算子网数量与主机数量","children":[]},{"level":3,"title":"VLSM 内部使用","slug":"vlsm-内部使用","link":"#vlsm-内部使用","children":[]},{"level":3,"title":"CIDR 向外通告","slug":"cidr-向外通告","link":"#cidr-向外通告","children":[]},{"level":3,"title":"ICMP ping 测试","slug":"icmp-ping-测试","link":"#icmp-ping-测试","children":[]},{"level":3,"title":"ICMP 重定向","slug":"icmp-重定向","link":"#icmp-重定向","children":[]},{"level":3,"title":"ARP","slug":"arp","link":"#arp","children":[]},{"level":3,"title":"传输层协议","slug":"传输层协议","link":"#传输层协议","children":[]}]}],"git":{"createdTime":1766826955000,"updatedTime":1766890838000,"contributors":[{"name":"PPPerryPan","email":"perrypan0123@outlook.com","commits":2}]},"filePathRelative":"blogs/tech/networking/others/01.01_networking2.md"}');export{E as comp,U as data};
