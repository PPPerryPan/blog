import{_ as s,c as a,b as e,o as i}from"./app-CUDFWA7u.js";const t="/blog/assets/image-20220328145107061-BGzjZIqN.png",l="/blog/assets/image-20220328145417019-BMyBqb9a.png",c={};function p(o,n){return i(),a("div",null,n[0]||(n[0]=[e(`<h1 id="实验二、vtp-vlan-trunk-channel实现小型局域网" tabindex="-1"><a class="header-anchor" href="#实验二、vtp-vlan-trunk-channel实现小型局域网"><span>实验二、VTP+VLAN+TRUNK+CHANNEL实现小型局域网</span></a></h1><h2 id="实验步骤" tabindex="-1"><a class="header-anchor" href="#实验步骤"><span>实验步骤</span></a></h2><p><strong>以太通道</strong>：分别在 S1 和 S2 交换机配置(为避免不同厂商,不同型号的设备之间的协商，请务必两端 手工配置，不要 auto)</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">S1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface range g0/1 - 2</span></span>
<span class="line">S1<span class="token punctuation">(</span>config-if-range<span class="token punctuation">)</span><span class="token comment">#channel-group 1 mode on</span></span>
<span class="line">S1<span class="token punctuation">(</span>config-if-range<span class="token punctuation">)</span><span class="token comment">#</span></span>
<span class="line">Creating a port-channel interface Port-channel <span class="token number">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>设置接口的 Trunk模式</strong>：分别在 S1 和 S2 交换机的 port-channel 或者 range g0/1 – 2 封装 802.1q 协议,并设置 trunk 模式</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">S1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int port-channel 1</span></span>
<span class="line">S1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport trunk encapsulation dot1q</span></span>
<span class="line">S1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#switchport mode  trunk </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>VTP 管理 VLAN</strong>：服务器设置为 server 模式,如在简单网络中,只设置一个 domain</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">S1<span class="token punctuation">(</span>vlan<span class="token punctuation">)</span><span class="token comment">#vtp server</span></span>
<span class="line">Device mode already VTP SERVER.</span>
<span class="line">S1<span class="token punctuation">(</span>vlan<span class="token punctuation">)</span><span class="token comment">#vtp domain cisco.com</span></span>
<span class="line">Changing VTP domain name from NULL to cisco.com</span>
<span class="line">S1<span class="token punctuation">(</span>vlan<span class="token punctuation">)</span><span class="token comment">#vlan 10 name teacher</span></span>
<span class="line">VLAN <span class="token number">10</span> modified:</span>
<span class="line">    Name: teacher</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>客户机一般只需要设置模式为client,只要是接口trunk模式正确,则可学习domain和vlan</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">S2<span class="token comment">#vlan database</span></span>
<span class="line">% Warning: It is recommended to configure VLAN from config mode,</span>
<span class="line">  as VLAN database mode is being deprecated. Please consult user</span>
<span class="line">  documentation <span class="token keyword">for</span> configuring VTP/VLAN <span class="token keyword">in</span> config mode.</span>
<span class="line"></span>
<span class="line">S2<span class="token punctuation">(</span>vlan<span class="token punctuation">)</span><span class="token comment">#vtp client</span></span>
<span class="line">Setting device to VTP CLIENT mode.</span>
<span class="line">S2<span class="token punctuation">(</span>vlan<span class="token punctuation">)</span><span class="token comment">#exit</span></span>
<span class="line">APPLY completed.</span>
<span class="line">Exiting<span class="token punctuation">..</span><span class="token punctuation">..</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>客户机会自动学习 vlan,最好使用 show vtp status 查看</p><p><img src="`+t+'" alt="image-20220328145107061"></p><p>改用G口</p><p><img src="'+l+`" alt="image-20220328145417019"></p><p><strong>各部门接口 access 到 vlan</strong>：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">S1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int range f0/1-10,f0/22</span></span>
<span class="line">S1<span class="token punctuation">(</span>config-if-range<span class="token punctuation">)</span><span class="token comment">#switchport mode access</span></span>
<span class="line">S1<span class="token punctuation">(</span>config-if-range<span class="token punctuation">)</span><span class="token comment">#switchport access vlan 10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="附" tabindex="-1"><a class="header-anchor" href="#附"><span>附</span></a></h2><p>将运行配置保存到启动配置：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">S1<span class="token comment"># copy running-config startup-config</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,19)]))}const d=s(c,[["render",p]]),u=JSON.parse('{"path":"/blogs/tech/networking/Cisco/Lab2.html","title":"VTP+VLAN+TRUNK+CHANNEL实现小型局域网","lang":"en-US","frontmatter":{"title":"VTP+VLAN+TRUNK+CHANNEL实现小型局域网","date":"2022-03-28T00:00:00.000Z","tags":["Networking","Cisco"],"categories":["tech"]},"headers":[{"level":2,"title":"实验步骤","slug":"实验步骤","link":"#实验步骤","children":[]},{"level":2,"title":"附","slug":"附","link":"#附","children":[]}],"git":{"createdTime":1766826955000,"updatedTime":1766890838000,"contributors":[{"name":"PPPerryPan","email":"perrypan0123@outlook.com","commits":2}]},"filePathRelative":"blogs/tech/networking/Cisco/Lab2.md"}');export{d as comp,u as data};
